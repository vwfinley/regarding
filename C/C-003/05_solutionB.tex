\section{Solution B: Customize an Existing LaTeX Container Image}

For most documents and projects, finding an available LaTeX container image is a good strategy.

Maybe the image was written by a colleague, or maybe by some unknown external developer.
Perhaps the image has been published to: Docker Hub, GitHub registry, or a private corporate registry.

In any case you will want to find an image that provides substantial functionality.
The more completely an image compiles features from your source files into a finished document, the less work you'll need to do.

Inevitably your selected image will be incomplete.
Required packages will be missing.
So, you will want to customize the container image to add missing packages and features.

\subsection{Image Customization}
Customization of the container image will resemble the iterative process shown in Figure \ref{fig:fig1}.
As you write your document, you will use the container to generate an output file.
You will then extend the container as needed until your output file is fully typeset as desired.

\begin{figure}[!h]
\centering
\begin{tikzpicture}
  \node [minimum width=1.25cm,draw,circle] (a) at (0,0) {\scriptsize Pull};
  \node [minimum width=1.25cm,draw,circle] (b) at ($(a)+(1.75,0)$) {\scriptsize Use};
  \node [minimum width=1.25cm,draw,circle] (c) at ($(b)+(1.75,0)$) {\scriptsize Extend};
  \node [minimum width=1.25cm,draw,circle] (d) at ($(c)+(1.75,0)$) {\scriptsize Build};
  \node [minimum width=1.25cm,draw,circle] (e) at ($(d)+(1.75,0)$) {\scriptsize Push};

  \draw[-{Latex[scale=1.0]}] (a) -- (b);
  \draw[-{Latex[scale=1.0]}] (b) -- (c);
  \draw[-{Latex[scale=1.0]}] (c) -- (d);
  \draw[dashed, -{Latex[scale=1.0]}] (d) -- (e);
  \draw[dashed, -{Latex[scale=1.0]}] (e) to[out=135,in=45] (a);
  \draw[-{Latex[scale=1.0]}] (d) to[out=135,in=45] (b);
\end{tikzpicture}
\caption{Workflow for Customization}
\label{fig:fig1}
\end{figure}

When you are satisfied with the resulting document file, you can optionally publish the container image to a registry with a Docker push command.

\subsection{Customization Example}
As an example, let's take a prebuilt LaTeX container image and customize it until it is suitable for typesetting this article you are now reading.

Glancing at Listing \ref{lst:lst1} below you will see the LaTeX container image was written by a GitHub user named jmuchovej.
The image is uploaded to the GHCR (GitHub container registry).  
The container image can be found at \url{https://github.com/jmuchovej/devcontainers/pkgs/container/devcontainers%2Flatex}
Furthermore you can locate the image's source code at \url{https://github.com/jmuchovej/devcontainers/tree/main/images/src/latex}

\lstnewenvironment{code}[1][]
{
 \lstset{
 basicstyle=\ttfamily\scriptsize,
 columns=fullflexible,
 captionpos=b,
 #1
 }}{}


\begin{mdframed}[backgroundcolor=black!20,leftmargin=0.0cm,skipabove=0.4cm,hidealllines=true,
  innerleftmargin=0.1cm,innerrightmargin=0.1cm,innertopmargin=0.15cm,innerbottommargin=-0.9cm]

\begin{code}[caption={Customization Example}, label=lst:lst1]
#-----------
# Dockerfile
#-----------
FROM ghcr.io/jmuchovej \
  /devcontainers/latex:2025

USER root

RUN <<EOF
    tlmgr update --self

    tlmgr install \
        pgf booktabs breqn caption \
        ec fc gensymb lastpage \
        makecell mathtools multirow \
        paralist parskip pgf sectsty \
        subfig tex4ht tocbibind 
        
    mktexpk --mfmode / --bdpi 600 \
      --mag 1+0/600 --dpi 600 tcrm1095
    mktexpk --mfmode / --bdpi 600 \
      --mag 1+0/600 --dpi 600 tcrm0900
    mktexpk --mfmode / --bdpi 600 \
      --mag 1+0/600 --dpi 600 tcrm0600
    mktexpk --mfmode / --bdpi 600 \
      --mag 1+0/600 --dpi 600 tcrm0800
EOF

USER vscode
\end{code}
\end{mdframed}


The package manger for the TexLive LaTeX distribution is named 'tlmgr' and it already resides inside the container.
We want to install some TexLive packages so that we can extend the functionality of the container.
In the listing you will see the tlmgr install command is called with a list of desired packages.
The list spans multiple lines that are separated with a backslash.

When the container is used to generate a .pdf file from .tex files, the latex process emits errors regarding missing fonts.
The way to avoid the errors is to create the missing fonts by calling mktexpk for each missing font. 

A new image can be generated by calling \verb|docker build .| in the directory with the Dockerfile. 

\subsection{Usage}
- as dev container
  - from vscode
  - from commandline
- from host






